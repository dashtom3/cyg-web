
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>发布</title>
    <link rel="stylesheet" href="../../js/layui/css/layui.css">
    <link rel="stylesheet" href="../../css/business_center.css">
    <link rel="stylesheet" href="../../js/fileinput/css/fileinput.min.css">
    <link rel="stylesheet" href="../../js/fileinput/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../js/fileinput/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="../../css/project/publish.css">
    <style>
        .blank5{
            height: 5px;
            line-height: 5px;
            visibility: hidden;
        }
        .people{
            display: none;
        }
    </style>
</head>
<body  scroll='no'>
<div class="content-show">
    <div class="page">
        <div class="layui-tab">
            <ul class="layui-tab-title">
                <li class="layui-this">基本信息</li>
                <li>价格数量</li>
                <li>规格属性</li>
            </ul>
            <form action="" class="layui-form" method="post">
                <div class="layui-tab-content">
                    <div class="layui-tab-item layui-show">
                        <div class="other-store">
                            <div class="layui-form-item">
                                <label class="layui-form-label">团购名称：</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="title" id="title" required  lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">简短名称：</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="name" id="name" required lay-verify="required" placeholder="请输入简介名称" autocomplete="off" class="layui-input">
                                </div>
                                <div class="layui-form-mid layui-word-aux">[ 用于消费券、邮件、短信列表展示的显示,字数不得超过20个字 ]</div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">团购简介：</label>
                                <div class="layui-input-block">
                                    <textarea type="text" name="introduction" id="introduction" required  lay-verify="required" placeholder="请输入团购简介" autocomplete="off" class="layui-input" style="width: 418px;height: 108px;resize: none"></textarea>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">标签：</label>
                                <div class="layui-input-block">
                                    <input type="checkbox" name="like[free]" title="免预约" checked>
                                    <input type="checkbox" name="like[much]" title="多套餐">
                                    <input type="checkbox" name="like[order]" title="可订座">
                                    <input type="checkbox" name="like[discount]" title="折扣券">
                                    <input type="checkbox" name="like[ooverdue]" title="过期退">
                                    <input type="checkbox" name="like[any]" title="随时退">
                                    <input type="checkbox" name="like[mian]" title="免运费">
                                    <input type="checkbox" name="like[overflow]" title="满立减">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">选择城市：</label>
                                <div class="layui-input-inline">
                                    <select name="city" lay-verify="required" id="city">
                                        <option value="">选择城市</option>
                                        <option value="0">北京</option>
                                        <option value="1">上海</option>
                                        <option value="2">广州</option>
                                        <option value="3">深圳</option>
                                        <option value="4">杭州</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">分类：</label>
                                <div class="layui-input-inline">
                                    <select name="kinds" lay-verify="required" id="kinds">
                                        <option value="" selected="selected">==请选择分类==</option>
                                        <option value="8">|--餐饮美食</option>
                                        <option value="9">|--休闲娱乐</option>
                                        <option value="10">|--生活服务</option>
                                        <option value="11">|--酒店旅游</option>
                                        <option value="13">|--爱车学车</option>
                                        <option value="14">|--都市丽人</option>
                                        <option value="15">|--我要结婚</option>
                                        <option value="16">|--医疗健康</option>
                                        <option value="17">|--母婴亲子</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">支持门店：</label>
                                <div class="layui-input-block">
                                    <input type="checkbox" name="switch" lay-skin="switch" id="stores">
                                    <div class="layui-form-mid layui-word-aux">百度烤肉</div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">团购图片集：</label>
                                <div class="layui-input-block">
                                    <input type="file" name="uploadfile" id="uploadfile" multiple class="projectfile" placeholder="上传" />
                                </div>
                            </div>
                            <div class="layui-form-item layui-form-text">
                                <label class="layui-form-label">团购描述：</label>
                                <div class="layui-input-inline">
                                    <textarea class="layui-textarea layui-hide" name="content" lay-verify="content" id="describe"></textarea>
                                </div>
                            </div>
                            <div class="layui-form-item layui-form-text">
                                <label class="layui-form-label">购买须知：</label>
                                <div class="layui-input-inline">
                                    <textarea class="layui-textarea layui-hide" name="content" lay-verify="content" id="buy"></textarea>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-input-block">
                                    <button class="layui-btn layui-btn-warm first"  lay-filter="formDemo">切换</button>
                                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="layui-tab-item">
                        <div class="other-store">
                            <div class="layui-form-item">
                                <label class="layui-form-label">团购开始时间：</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="beginGroup" required  lay-verify="required"  autocomplete="off" class="layui-input" id="beginGroup">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">团购结束时间：</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="endGroup" required lay-verify="required" autocomplete="off" class="layui-input" id="endGroup">
                                </div>
                                <!--<div class="layui-form-mid layui-word-aux">[ 用于消费券、邮件、短信列表展示的显示,字数不得超过20个字 ]</div>-->
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">团购总数：</label>
                                <div class="layui-input-inline">
                                    <input type="number" class="layui-input" id="allNum">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">会员最低购买数量：</label>
                                <div class="layui-input-inline">
                                    <input type="number" class="layui-input" id="minNum">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">会员最高购买数量：</label>
                                <div class="layui-input-inline">
                                    <input type="number" class="layui-input" id="maxNum">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">原价：</label>
                                <div class="layui-input-inline">
                                    <input type="number" class="layui-input" id="price">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">团购价：</label>
                                <div class="layui-input-inline">
                                    <input type="number" class="layui-input" id="groupPrice">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">商户结算价：</label>
                                <div class="layui-input-inline">
                                    <input type="number" class="layui-input" id="accounts">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-input-block">
                                    <button class="layui-btn layui-btn-warm second"  lay-filter="formDemo">切换</button>
                                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="layui-tab-item">
                        <div class="other-store" style="height: 550px">
                            <div class="layui-form-item">
                                <label class="layui-form-label">发券类型：</label>
                                <div class="layui-input-inline">
                                    <select name="city" lay-verify="required">
                                        <option value="0">按单发券</option>
                                        <option value="1">按件发券</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">消费券有效期类型：</label>
                                <div class="layui-input-inline">
                                    <select name="city" lay-verify="required">
                                        <option value="8">指定日期</option>
                                        <option value="9">指定天数</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">消费券生效时间：</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="beginTime" autocomplete="off" class="layui-input" id="beginActive">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">消费券到期时间：</label>
                                <div class="layui-input-inline">
                                    <input type="text" name="endTime"  autocomplete="off" class="layui-input" id="endActive">
                                </div>
                            </div>
                            <div class="layui-form-item layui-form-text last">
                                <label class="layui-form-label">消费券商品类型：</label>
                                <div class="layui-input-inline">
                                    <select name="city" lay-verify="required">
                                        <option value="" selected="selected">==请选择分类==</option>
                                        <option value="18">|--餐饮美食</option>
                                        <option value="19">|--休闲娱乐</option>
                                        <option value="20">|--生活服务</option>
                                        <option value="21">|--酒店旅游</option>
                                        <option value="22">|--爱车学车</option>
                                        <option value="23">|--都市丽人</option>
                                        <option value="24">|--我要结婚</option>
                                        <option value="25">|--医疗健康</option>
                                        <option value="26">|--母婴亲子</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-form-item other" style="display: none">
                                <label class="layui-form-label">商品属性：</label>
                                <div class="layui-input-block">
                                    <div class="firstRow">
                                        <span class="first-title">时段</span>：
                                        <input type="text" class="textbox" style="width:50px;" name="deal_attr[17][]" value="" onchange="changeTime(this);">

                                        <span>递加价格</span>：<input type="text" class="textbox" style="width:50px;" name="deal_attr_price[17][]" value="">
                                        <span>递加结算价</span>：<input type="text" class="textbox" style="width:50px;" name="deal_add_balance_price[17][]" value="">
                                        <a href="javascript:;" onclick="addRow(this,'time')" class="add">增加</a>
                                        <a href="javascript:;" onclick="showSet(this,'时段')">设置库存</a>
                                        <div class="blank5"></div>
                                    </div>
                                    <div class="secondRow">
                                        <span class="second-title">人数</span>：
                                        <input type="text" class="textbox" style="width:50px;" name="deal_attr[18][]" value="" onchange="changeNum(this);">

                                        递加价格：<input type="text" class="textbox" style="width:50px;" name="deal_attr_price[18][]" value="">
                                        递加结算价：<input type="text" class="textbox" style="width:50px;" name="deal_add_balance_price[18][]" value="">
                                        <a href="javascript:;" onclick="addRow(this,'people')" class="add">增加</a>
                                        <a href="javascript:;" onclick="showPeople(this,'人数')">设置库存</a>
                                        <div class="blank5"></div>
                                    </div>
                                    <div class="layui-input-block set" style="display: none">
                                        <table class="layui-table">
                                            <tr>
                                                <th class="nameTable">时段</th>
                                                <th class="people">人数</th>
                                                <th>库存数</th>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <select class="num num1">
                                                        <option value=""></option>
                                                    </select>
                                                </td>
                                                <td class="people">
                                                    <select class="people1 num1">
                                                        <option value=""></option>
                                                    </select>
                                                </td>
                                                <td>
                                                    <input type="text"/>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-input-block">
                                    <button class="layui-btn layui-btn-warm" lay-submit="" lay-filter="demo1">提交</button>
                                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
<script src="../../js/jquery.min.js"></script>
<script src="../../js/layui/lay/dest/layui.all.js"></script>
<script src="../../js/layui/laydate/laydate.js"></script>
<script src="../../js/business_center.js"></script>
<script src="../../js/fileinput/js/fileinput.min.js"></script>
<script src="../../js/fileinput/js/fileinput_locale_zh.js"></script>
<script src="../../js/fileinput/js/bootstrap.min.js"></script>
<script src="../../js/publish.js"></script>
<script src="../../js/project.js"></script>
<script>
    layui.use(['form', 'layedit', 'laydate'], function() {
        var form = layui.form()
            , layer = layui.layer
            , layedit = layui.layedit
            , laydate = layui.laydate;

        //创建一个编辑器
        var editIndex = layedit.build('describe');
        var buy = layedit.build('buy')
    });
    //设置日期
    laydate({
        elem: '#beginGroup',
        format:   'YYYY-MM-DD hh:mm'
    });
    laydate({
        elem: '#endGroup',
        format:   'YYYY-MM-DD hh:mm'
    });
    laydate({
        elem: '#beginActive',
        format:   'YYYY-MM-DD hh:mm'
    });
    laydate({
        elem: '#endActive',
        format:   'YYYY-MM-DD hh:mm'
    });
    //设置上传文件
    $("#uploadfile").fileinput({
        language: 'zh', //设置语言
        uploadUrl: "http://127.0.0.1/testDemo/fileupload/upload.do", //上传的地址
        allowedFileExtensions: ['jpg', 'gif', 'png'],//接收的文件后缀
        //uploadExtraData:{"id": 1, "fileName":'123.mp3'},
        uploadAsync: true, //默认异步上传
        showUpload: true, //是否显示上传按钮
        showRemove : true, //显示移除按钮
        showPreview : true, //是否显示预览
        showCaption: false,//是否显示标题
        browseClass: "btn btn-warning", //按钮样式
        dropZoneEnabled: false,//是否显示拖拽区域
        //minImageWidth: 50, //图片的最小宽度
        //minImageHeight: 50,//图片的最小高度
        //maxImageWidth: 1000,//图片的最大宽度
        //maxImageHeight: 1000,//图片的最大高度
        //maxFileSize: 0,//单位为kb，如果为0表示不限制文件大小
        //minFileCount: 0,
        maxFileCount: 5, //表示允许同时上传的最大文件个数
        enctype: 'multipart/form-data',
        validateInitialCount:true,
        previewFileIcon: "<i class='glyphicon glyphicon-king'></i>",
        msgFilesTooMany: "选择上传的文件数量({n}) 超过允许的最大数值{m}！",
    });
    //异步上传返回结果处理
    $('#uploadfile').on('fileerror', function(event, data, msg) {
        console.log(data.id);
        console.log(data.index);
        console.log(data.file);
        console.log(data.reader);
        console.log(data.files);
        // get message
        alert(msg);
    });
    //异步上传返回结果处理
    $("#uploadfile").on("fileuploaded", function (event, data, previewId, index) {
        console.log(data.id);
        console.log(data.index);
        console.log(data.file);
        console.log(data.reader);
        console.log(data.files);
        var obj = data.response;
        alert(JSON.stringify(data.success));

    });

    //同步上传错误处理
    $('#uploadfile').on('filebatchuploaderror', function(event, data, msg) {
        console.log(data.id);
        console.log(data.index);
        console.log(data.file);
        console.log(data.reader);
        console.log(data.files);
        // get message
        alert(msg);
    });
    //同步上传返回结果处理
    $("#uploadfile").on("filebatchuploadsuccess", function (event, data, previewId, index) {
        console.log(data.id);
        console.log(data.index);
        console.log(data.file);
        console.log(data.reader);
        console.log(data.files);
        var obj = data.response;
        alert(JSON.stringify(data.success));
    });

    //上传前
    $('#uploadfile').on('filepreupload', function(event, data, previewId, index) {
        var form = data.form, files = data.files, extra = data.extra,
            response = data.response, reader = data.reader;
        console.log('File pre upload triggered');
    });

</script>
</html>